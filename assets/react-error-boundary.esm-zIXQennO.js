import{r as i}from"./index-w37k12WO.js";const c=i.createContext(null),l={didCatch:!1,error:null};class h extends i.Component{constructor(r){super(r),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=l}static getDerivedStateFromError(r){return{didCatch:!0,error:r}}resetErrorBoundary(){const{error:r}=this.state;if(r!==null){for(var e,t,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];(e=(t=this.props).onReset)===null||e===void 0||e.call(t,{args:a,reason:"imperative-api"}),this.setState(l)}}componentDidCatch(r,e){var t,o;(t=(o=this.props).onError)===null||t===void 0||t.call(o,r,e)}componentDidUpdate(r,e){const{didCatch:t}=this.state,{resetKeys:o}=this.props;if(t&&e.error!==null&&E(r.resetKeys,o)){var a,s;(a=(s=this.props).onReset)===null||a===void 0||a.call(s,{next:o,prev:r.resetKeys,reason:"keys"}),this.setState(l)}}render(){const{children:r,fallbackRender:e,FallbackComponent:t,fallback:o}=this.props,{didCatch:a,error:s}=this.state;let d=r;if(a){const u={error:s,resetErrorBoundary:this.resetErrorBoundary};if(typeof e=="function")d=e(u);else if(t)d=i.createElement(t,u);else if(o===null||i.isValidElement(o))d=o;else throw s}return i.createElement(c.Provider,{value:{didCatch:a,error:s,resetErrorBoundary:this.resetErrorBoundary}},d)}}function E(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return n.length!==r.length||n.some((e,t)=>!Object.is(e,r[t]))}function f(n){if(n==null||typeof n.didCatch!="boolean"||typeof n.resetErrorBoundary!="function")throw new Error("ErrorBoundaryContext not found")}function y(){const n=i.useContext(c);f(n);const[r,e]=i.useState({error:null,hasError:!1}),t=i.useMemo(()=>({resetBoundary:()=>{n.resetErrorBoundary(),e({error:null,hasError:!1})},showBoundary:o=>e({error:o,hasError:!0})}),[n.resetErrorBoundary]);if(r.hasError)throw r.error;return t}function p(n,r){const e=i.forwardRef((o,a)=>i.createElement(h,r,i.createElement(n,{...o,ref:a}))),t=n.displayName||n.name||"Unknown";return e.displayName="withErrorBoundary(".concat(t,")"),e}export{h as ErrorBoundary,c as ErrorBoundaryContext,y as useErrorBoundary,p as withErrorBoundary};
